/*! For license information please see index.js.budles.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/index.js":()=>{eval("let btnGasto = document.getElementById('btnAddGasto');\r\nconst div = document.getElementById('containerGastos');\r\nconst formulario = document.getElementById('gastoForm');\r\n\r\nconst urlParams = new URLSearchParams(window.location.search);\r\nconst userId = urlParams.get('id');\r\n\r\nif (!userId || isNaN(userId)) {\r\n    alert('ID do usuário inválido. Redirecionando para a página de login.');\r\n    window.location.href = \"../pages/login.html\";\r\n}\r\n\r\n// Verifique o valor do ID no console\r\nconsole.log(\"ID do usuário:\", userId);\r\n\r\nfunction criarLabelEInput() {\r\n    const label = document.createElement('label');\r\n    label.textContent = 'Tipo do Gasto';\r\n    const input = document.createElement('input');\r\n    input.setAttribute('name', 'tipoGasto');\r\n    input.setAttribute('required', 'true');\r\n\r\n    const label2 = document.createElement('label');\r\n    label2.textContent = 'Valor do Gasto';\r\n    const input2 = document.createElement('input');\r\n    input2.setAttribute('name', 'valorDoGasto');\r\n    input2.setAttribute('type', 'number');\r\n    input2.setAttribute('required', 'true');\r\n\r\n    return { label, input, label2, input2 };\r\n}\r\n\r\nbtnGasto.addEventListener('click', () => {\r\n    const { label: tipoLabel, input: tipoInput } = criarLabelEInput();\r\n    const br1 = document.createElement('br');\r\n    const { label2: valorLabel2, input2: valorInput2 } = criarLabelEInput();\r\n    const br2 = document.createElement('br');\r\n\r\n    div.append(br1, tipoLabel, tipoInput, br2, valorLabel2, valorInput2);\r\n});\r\n\r\nformulario.addEventListener('submit', (ev) => {\r\n    ev.preventDefault();\r\n\r\n    const nome = document.getElementById('nome').value.trim();\r\n    const salario = parseFloat(document.getElementById('salario').value);\r\n    const mes_selector = document.getElementById('mes')\r\n    const mes = document.getElementById('mes').value.trim();\r\n\r\n    for (let i = 0; i < mes_selector.options.length; i++) {\r\n        const mes_selecionado = mes_selector.options[i];\r\n\r\n        if (mes_selecionado.value == mes){\r\n            mes_selector.remove(i)\r\n            break\r\n        }\r\n        \r\n    }\r\ny\r\n    if (!nome || isNaN(salario) || !mes) {\r\n        alert(\"Por favor, preencha todos os campos obrigatórios.\");\r\n        return;\r\n    }\r\n\r\n    // Coleta os gastos\r\n    const nome_do_gasto = document.querySelectorAll(\"input[name='tipoGasto']\");\r\n    const valor_do_gasto = document.querySelectorAll(\"input[name='valorDoGasto']\");\r\n\r\n    let gastos = [];\r\n    for (let i = 0; i < nome_do_gasto.length; i++) {\r\n        const tipoGasto = nome_do_gasto[i].value.trim();\r\n        const valorDoGasto = parseFloat(valor_do_gasto[i].value);\r\n\r\n        if (!tipoGasto || isNaN(valorDoGasto)) {\r\n            alert(\"Por favor, preencha corretamente os campos de gastos.\");\r\n            return;\r\n        }\r\n\r\n        gastos.push({ tipoGasto, valorDoGasto });\r\n    }\r\n\r\n    // Organiza o objeto a ser enviado ao backend\r\n    const dataToSend = {\r\n        salario,\r\n        mes,\r\n        gastos,\r\n        idPessoa: userId\r\n    };\r\n\r\n    console.log(\"Dados enviados para o backend:\", dataToSend);\r\n\r\n    // Envia a requisição para o backend\r\n    fetch('http://localhost:3001/criar', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(dataToSend)\r\n    })\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                throw new Error('Erro na requisição');\r\n            }\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            console.log('Resposta do servidor:', data);\r\n            alert(\"Dados salvos com sucesso!\");\r\n            window.location.href = `../pages/visuallizar_graficos.html?id=${userId}`;\r\n        })\r\n        .catch((err) => {\r\n            console.error('Erro:', err);\r\n            alert(\"Ocorreu um erro ao salvar os dados. Tente novamente mais tarde.\");\r\n        });\r\n});\r\n\n\n//# sourceURL=webpack:///./src/index.js?")}},__webpack_exports__={};__webpack_modules__["./src/index.js"]()})();