/*! For license information please see visualizar_graficos.budles.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/visualizar_graficos.js":()=>{eval("const urlParams = new URLSearchParams(window.location.search);\r\nconst userId = urlParams.get('id');\r\n\r\nfetch(`http://localhost:3001/Visualizar/${userId}`)\r\n.then(response => response.json())\r\n.then(data => {\r\n    const container = document.getElementById('espaco');\r\n    container.innerHTML = ''; // Limpar conteúdo anterior\r\n    console.log(data);\r\n\r\n    // Renderizar o nome da pessoa\r\n    const pessoaTitle = document.createElement('h2');\r\n    pessoaTitle.textContent = `Gastos de ${data.pessoa}`;\r\n    container.appendChild(pessoaTitle);\r\n\r\n    // Renderizar os meses e gráficos\r\n    data.meses.forEach(mes => {\r\n        const card = document.createElement('div');\r\n        card.classList.add('card');\r\n        card.id = mes.idInfoFinancas;\r\n        \r\n        const mesDiv = document.createElement('div');\r\n        mesDiv.classList.add('mes');\r\n        mesDiv.textContent = `${mes.mes} - Salário: R$${mes.salario}`;\r\n        \r\n        let button = document.createElement('button');\r\n        button.textContent = 'Excluir';\r\n        button.classList.add('bnt_excluir');\r\n        button.id = mes.idInfoFinancas;\r\n\r\n        // Adicionar evento diretamente ao botão\r\n        button.addEventListener('click', () => {\r\n            fetch(`http://localhost:3001/delete_tudo/${button.id}`, {\r\n                method: 'DELETE'  // Use o método DELETE\r\n            })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                alert('Excluído com sucesso');\r\n                card.remove();  // Remove o card do DOM após excluir\r\n            })\r\n            .catch(err => {\r\n                console.log('Erro: ', err);\r\n            });\r\n        });\r\n\r\n        card.appendChild(mesDiv);\r\n        card.appendChild(button);\r\n\r\n        // Adicionar o gráfico de pizza\r\n        const canvas = document.createElement('canvas');\r\n        card.appendChild(canvas);\r\n\r\n        // Preparar os dados para o gráfico de pizza\r\n        const labels = mes.gastos.map(gasto => gasto.tipoGasto);\r\n        const valores = mes.gastos.map(gasto => gasto.valorDoGasto);\r\n\r\n        // Calcular as porcentagens dos gastos em relação ao salário\r\n        const porcentagens = valores.map(valor => ((valor / mes.salario) * 100).toFixed(2));\r\n\r\n        // Gerar o gráfico de pizza para cada mês\r\n        new Chart(canvas, {\r\n            type: 'pie',\r\n            data: {\r\n                labels: labels.length > 0 ? labels : ['Sem gastos'],\r\n                datasets: [{\r\n                    label: 'Gastos (%)',\r\n                    data: valores.length > 0 ? porcentagens : [100],\r\n                    backgroundColor: valores.length > 0 ? [\r\n                        'rgba(255, 99, 132, 0.2)',\r\n                        'rgba(54, 162, 235, 0.2)',\r\n                        'rgba(255, 206, 86, 0.2)',\r\n                        'rgba(75, 192, 192, 0.2)',\r\n                        'rgba(153, 102, 255, 0.2)',\r\n                        'rgba(255, 159, 64, 0.2)'\r\n                    ] : ['rgba(201, 201, 201, 0.2)'],\r\n                    borderColor: valores.length > 0 ? [\r\n                        'rgba(255, 99, 132, 1)',\r\n                        'rgba(54, 162, 235, 1)',\r\n                        'rgba(255, 206, 86, 1)',\r\n                        'rgba(75, 192, 192, 1)',\r\n                        'rgba(153, 102, 255, 1)',\r\n                        'rgba(255, 159, 64, 1)'\r\n                    ] : ['rgba(201, 201, 201, 1)'],\r\n                    borderWidth: 1\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                plugins: {\r\n                    legend: {\r\n                        position: 'top',\r\n                    },\r\n                    tooltip: {\r\n                        callbacks: {\r\n                            label: function(tooltipItem) {\r\n                                return `${tooltipItem.label}: ${tooltipItem.raw}%`;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Adicionar o card ao container\r\n        container.appendChild(card);\r\n    });\r\n\r\n})\r\n.catch(err => {\r\n    console.error('Erro ao buscar os dados:', err);\r\n});\r\n\r\n\r\nlet btn_voltar = document.createElement('button')\r\nbtn_voltar.textContent = \"Voltar\"\r\nbtn_voltar.addEventListener(\"click\", () =>{\r\n    location.href = `../index.html?id=${userId}`\r\n})\r\ndocument.body.appendChild(btn_voltar)\n\n//# sourceURL=webpack:///./src/visualizar_graficos.js?")}},__webpack_exports__={};__webpack_modules__["./src/visualizar_graficos.js"]()})();